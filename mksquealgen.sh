
cat > squealgen <<'EOF'
#!/bin/bash
# NB: this file is generated by mksquealgen.sh, don't edit it directly

if [ "$#" -ne 3 ]; then
    echo "Usage: squealgen DBNAME MODULENAME SCHEMA";
    exit 1;
fi
DBNAME=$1
MODULENAME=$2
SCHEMA=$3
EOF

echo 'PSQLCMD=${PSQLCMD:-psql}' >> squealgen
echo '$PSQLCMD "${DBNAME}" -v chosen_schema="${SCHEMA}" -v modulename="${MODULENAME}" <<"EOF"' >> squealgen
cat squealgen.sql >> squealgen
echo "EOF" >> squealgen
chmod 755 squealgen
